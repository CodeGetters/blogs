---
title: 使用宝塔部署 kuma 
date: 2023-03-04
categories:
- 教程
tags:
- 博客
prev: ./04添加搜索功能.md
---

## 前言

站点监控这东西我还是在一个大佬的博客中发现的，不但看起来挺不错的还能知道友链情况。在看到这个东西以后，我也想跟着做放在我的博客中。最初，我使用的是 UptimeRobot，这个产品有 50 个免费的额度，
对于我这种需求不是很高的对象来说当然是完全足够的呀。说搞就搞，马上开始查阅资料教程，不过在查阅了很多资料以后发现这个玩意儿有些缺陷[由于Uptime Robot被滥用于某些特殊用途，某些服务已将其服务器访问封禁。](https://zhuanlan.zhihu.com/p/488104196)
另外，它的界面没有达到我的预期，这也是我弃用这个的原因。尽管有大佬已经开源了基于该产品 API 写了个自己的界面，但是太过于麻烦，如果想看的小伙伴可以去[这里](http://status.reday.asia)。
不过，它比前者部署更加方便，直接使用 vercel 就能部署上线。

## docker 部署

 根据官方[文档](https://uptime.kuma.pet/)，在linux上直接一把梭下面的代码：

```shell
docker run -d --restart=always -p 3001:3001 -v uptime-kuma:/app/data --name uptime-kuma louislam/uptime-kuma:1
```

但这不是本文的重点，我们的重点是使用宝塔的docker部署。进入宝塔界面，点击左侧菜单的 docker 如果你的服务器没有安装 docker 会有提示让你安装，我们这里就点击安装。然后我们进入软件商店搜索“docker管理管理器”，这个插件是待会儿我们要用的。

安装完以上的内容后，我们进入docker界面选择镜像，然后从仓库中拉取

![](https://txy.reday.asia/images/202303041940827.png)

然后在镜像名中填写`louislam/uptime-kuma:1`，它就会拉取镜像到服务器。等他拉取完，我们在容器中添加容器，参数的话参考一下这个

![](https://txy.reday.asia/images/202303041945735.png)

不想一个一个的填的话就使用 XShell 连接到我们的服务器，然后使用上面官方给的代码直接一把梭就好了。

## 配置 kuma

部署 docker 后，我们的入门页面是在 http://localhost:3001，首次进入需要设置一下账户密码，设置完就可以进入了。接下来我们就开始配置一下 kuma 吧。

我们这里就重点说一下配置邮件提醒吧，我们点击右上角进入设置点击通知页，点击`设置通知`

![](https://txy.reday.asia/images/202303042019075.png)

这里的主机名的话，参考你用的是什么邮件服务商，我用的是 qq，百度后是`imap.qq.com`，端口号一般是465，安全性选择TLS，最后的用户名密码是邮件开启的`SMTP`邮箱和授权码(授权码直接去qq邮箱申请就行)。最后记得测试一下哦~

## 反代

配置后我们的内容后，我们的用户界面一般是我们的端口号+:3001，如何将我们的界面展示成一个网址？？？我想的是我点击一个虚拟链接然后它直接跳转到这个界面结果搞成了我的博客域名，效果就是我进入自己的博客就跳转到界面。
成功失败，然后我看了一下别人是直接新建一个站点，然后再点击这个站点就跳转，完美！接下来就开始搞吧，我们回到宝塔面板网站页面新建一个站点，然后点击添加反向代理

![](https://txy.reday.asia/images/202303042034520.png)

这里我们的目标地址就填写我们的 ip + 端口号，接下来我们就可以使用我们的网址访问这个界面了~

<reward/>
