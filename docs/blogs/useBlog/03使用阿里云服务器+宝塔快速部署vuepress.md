---
title: 使用阿里云服务器+宝塔快速部署vuepress
date: 2023-2-19
categories:
- 教程
tags:
- 博客
prev: ./02PicGo+腾讯云搭建图床
---

[[toc]]

## 前言

在前几天，我白嫖了阿里云的七个月的服务器(阿里云yyds！)，本着不能浪费的原则，我打算将自己在vercel上部署的博客迁移到阿里云服务器上

### 服务器安装软件

说干就干，如果想要在服务器上运行那么必不可少的就是`nginx`(当然也有其他类似的，根据自己的需求即可)。
想要让我们的博客能够方便的更新内容，那就需要使用`git`拉取最新的代码。另外，我们还需要引入依赖让我们的博客跑起来，不用说这就是`node`了

- nginx
- [git](https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git)
- [node](http://nodejs.cn/)

### 部署工具

想要实现我们的目标，部署工具的话这里我是用的是宝塔部署(自己部署太麻烦了，别问为什么，问就是血的教训～)，当然，喜欢折腾的伙伴也可以自己在服务器上输入命令行进行部署，这里就不过多阐述了。
服务器连接工具用的是XShell，安装过程我就不多说了，网上也是一大堆。

- [宝塔](https://www.bt.cn/new/index.html)
- [Xshell](https://www.xshell.com/zh/xshell/)


## 开始部署

### 安装nginx

了解我们所需要的内容后，接下来我们就开始折腾吧！
首先，我们打开阿里云控制台，点击服务器ESC界面进入实例 拿到我们服务器的公网IP地址(如果还没有创建实例的伙伴需要创建实例才能拿到公网IP)，这里的公网IP就是我们用于连接服务器的IP地址

![](https://txy.reday.asia/images/202302192018676.png)

接下来，打开`XShell`连接到我们的服务器，这样我们就在这里使用命令行进行远程操作我们的服务器了~进入宝塔主页，点击安装宝塔，复制一下下载指令，粘贴在我们的`Xshell`界面中，这样就开始自动安装宝塔了。

![](https://txy.reday.asia/images/202302192035007.png)

安装好后，服务器会返回给我们进去宝塔面板的链接以及账号密码，这里衷心地希望大家能够把这里的账号密码截图下来保存，因为我们每一次登录宝塔面板都会用到这个账号密码，另外端口号也是必要的。
![](https://txy.reday.asia/images/202302192039122.png)

我们在浏览器中输入外网链接登陆宝塔面板后(记得端口号也是必要的昂)，点击网站，在这里我们新建一个网站，将我们准备用于让外网访问的域名填在这里。
![](https://txy.reday.asia/images/202302192041820.png)

添加上网址后，宝塔会自动在目录创建文件夹，用于存放项目内容，接着我们在软件商店中搜索处搜索`nginx`后点击安装，等几分钟后它就会自动帮我们安装好。

### node

要安装`node`，这里我推荐`node版本管理工具`，功能和`nvm`类似。这里注意如果安装的`node`版本过高会导致我们的博客运行不起来，所以我安装的`node`版本是14.17.6。在这之前我使用的版本为16.15.0。
使用`node`版本管理工具安装好后，记得命令行版本将我们所需的版本选上，否则就没有使用`node`了。当然你也可以使用其他包管理工具，我使用的是`yarn`，就在`Xshell`输入命令行下载

```shell
npm i -g yarn
```

![](https://txy.reday.asia/images/202302192045057.png)

### git

安装好后我们下载`git`来克隆我们的项目。安装`git`非常简单只需要嗦一条指令即可(注意你下载的目录，下载之前需要切换到想要安装的位置)输入以下命令进行安装：

```shell
yum -y install git
```
安装完记得查看版本号以检查是否安装完成
```shell
git --version
```

然后配置用户名和邮箱
```shell
git config --global user.name "name"
git config --global user.email "email" 
```

完成以上配置后，接下来就到了离成功最近的一步！！！

输入以下命令克隆我们在github/gitee上的仓库，

```shell
git clone 仓库地址
```

如果说你想使用ssh连接我们的远程仓库，就需要使用配置一下`ssh`，这里就不过多说了。接下来输入以下命令：
```shell
# 进入项目目录
cd blogs
# 引入依赖
yarn 
# 打包
yarn docs:build
```

### 更改网站目录

我们回到刚才创建网站的界面，将我们的网站目录设置成我们打包的目标目录。设置好后我们就使用刚才的域名访问就能看到我们的博客了~

![](https://txy.reday.asia/images/202302192115157.png)

## 自动化部署

搞完上面的内容其实已经算是结束了，不过每次更新代码以及文章的时候都需要重新手动打包。这有些过于麻烦了，好在宝塔有一个计划任务可以帮助我们完成上述的问题。

我们这里只需要编写`shell`脚本就行，自动完成拉取

```shell
# 切换到仓库
cd /www/wwwroot
# 删除原文件
rm -rf /www/wwwroot/blogs
# 克隆代码
git clone https://github.com/CodeGetters/blogs.git
# 切换到 blogs 文件夹
cd blogs
# 下载依赖
yarn
# 项目打包
yarn docs:build
```

![](https://txy.reday.asia/images/202302192124117.png)

好了，到这里我们的教程已经结束了，如果这篇教程对你有帮助，可以考虑请我喝杯奶茶~毕竟创作不易哈哈哈

<reward/>
